import{useBell as e,MagicBellProvider as t,useMagicBellEvent as n,useNotification as o,useConfig as r,clientSettings as i,useNotifications as a,useNotificationPreferences as c,postAPI as l}from"@magicbell/react-headless";export{clientSettings,eventAggregator,registry,useMagicBellEvent,useNotification,useNotificationPreferences,useNotificationStoresCollection,useNotificationUnmount,useNotifications}from"@magicbell/react-headless";import s,{createContext as u,useContext as d,useCallback as f,useRef as p,useEffect as m,useState as h}from"react";import b from"react-use/lib/useToggle";import{css as g,jsx as v}from"@emotion/react";import{isNil as y,pathOr as C,mergeDeepRight as x,path as w}from"ramda";import k from"tinycolor2";import"dayjs/locale/es";import"dayjs/locale/pt-br";import"dayjs/locale/de";import E from"dayjs";import{render as _,cancel as O}from"timeago.js";import A from"@tippyjs/react/headless";import j from"react-use/lib/useInterval";import M from"dayjs/plugin/localizedFormat";import $ from"dayjs/plugin/relativeTime";import R from"dayjs/plugin/updateLocale";import S from"axios";import{useLocalStorage as I}from"react-use";import P from"react-infinite-scroll-component";function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},z.apply(this,arguments)}function L(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||(r[n]=e[n]);return r}const N="#3498F4",T='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',F={icon:{borderColor:N,width:"24px"},header:{backgroundColor:N,backgroundOpacity:1,borderRadius:"8px",fontFamily:T,fontSize:"14px",textAlign:"left",textColor:"white",textTransform:"none"},footer:{backgroundColor:N,backgroundOpacity:1,borderRadius:"8px",fontFamily:T,fontSize:"14px",textAlign:"left",textColor:"white",textTransform:"none"},unseenBadge:{backgroundColor:"#DF4759",backgroundOpacity:1,borderRadius:"2px",fontFamily:T,fontSize:"10px",textAlign:"center",textColor:"white",textTransform:"none"},container:{backgroundColor:"#FFFFFF",backgroundOpacity:1,borderRadius:"8px",fontFamily:T,fontSize:"14px",textAlign:"left",textColor:"#3A424D",textTransform:"none"},notification:{default:{backgroundColor:N,backgroundOpacity:.1,borderRadius:"8px",fontFamily:T,fontSize:"14px",textAlign:"left",textColor:"#3A424D",textTransform:"none"},unread:{backgroundColor:N,backgroundOpacity:0,borderRadius:"8px",fontFamily:T,fontSize:"14px",textAlign:"left",textColor:"#3A424D",textTransform:"none"},unseen:{backgroundColor:N,backgroundOpacity:.05,borderRadius:"8px",fontFamily:T,fontSize:"14px",textAlign:"left",textColor:"#3A424D",textTransform:"none"}}},B=u(F),V=B.Provider,D=()=>d(B);let U;const H=g(U||(U=(e=>e)`
  backface-visibility: visible;
  background-clip: border-box;
  background-color: transparent;
  background-origin: padding-box;
  background-position: 0 0;
  background-size: auto;
  border-radius: 0;
  border: 0;
  box-shadow: none;
  box-sizing: content-box;
  clear: none;
  clip: auto;
  color: inherit;
  cursor: auto;
  direction: inherit;
  display: block;
  left: auto;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell,
    'Helvetica Neue', sans-serif;
  font-size: 14px;
  font-weight: normal;
  height: auto;
  hyphens: manual;
  letter-spacing: normal;
  line-height: 1;
  margin: 0;
  max-height: none;
  max-width: none;
  min-height: 0;
  min-width: 0;
  opacity: 1;
  outline: invert none medium;
  padding: 0;
  perspective: none;
  position: static;
  right: auto;
  top: auto;
  transform: none;
  text-align: left;
  text-decoration: none;
  vertical-align: baseline;
  visibility: inherit;
  white-space: normal;
  width: auto;
  word-spacing: normal;
  z-index: auto;

  div,
  span,
  p,
  a,
  strong,
  b,
  u,
  i,
  ol,
  ul,
  li,
  form,
  label,
  table,
  tr,
  th,
  td,
  article,
  aside,
  footer,
  header,
  nav,
  section {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
  }

  a {
    cursor: pointer !important;
    color: inherit !important;
  }

  button {
    background: transparent;
    border: none;
    font-size: inherit !important;
    color: inherit;
    padding: 0;
    cursor: pointer !important;
  }
`));function W(e,t){const n=k(e);return n.setAlpha(t),n.toRgbString()}function G(e,t){return k.mix(e,"black",t||50).toRgbString()}let q,K=e=>e;function X({count:e}){const t=D(),{unseenBadge:n}=t,o=g(q||(q=K`
    align-items: center;
    background: ${0} !important;
    border-radius: ${0} !important;
    color: ${0} !important;
    display: flex;
    font-family: ${0} !important;
    font-size: ${0} !important;
    height: 18px !important;
    min-width: 10px !important;
    padding: 0 2px !important;
    text-align: ${0} !important;
    text-transform: ${0} !important;

    div {
      width: 100%;
    }
  `),W(n.backgroundColor,n.backgroundOpacity),n.borderRadius,n.textColor,n.fontFamily,n.fontSize,n.textAlign,n.textTransform);return v("span",{css:[H,o]},v("div",{"aria-label":`${e} unread items`,"aria-live":"polite",role:"status"},e))}let Z,Y=e=>e;function J({count:e}){const t=D(),{icon:n}=t;return 0===e?null:v("div",{css:g(Z||(Z=Y`
        position: absolute !important;
        transform: translate(-50%, -50%) scale(${0});
        top: 10%;
        left: 80%;
      `),Math.max(1,parseInt(n.width)/24))},v(X,{count:e}))}function Q(){const e=D(),{icon:t}=e;return s.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:t.borderColor},s.createElement("path",{d:"M15.9997 4.70663C14.3971 4.71182 12.8617 5.34576 11.7284 6.47013C10.5951 7.59449 9.95592 9.11801 9.95038 10.7082V15.0907C9.95038 16.4805 9.85234 17.3932 9.62941 18.1738C9.39598 18.9845 9.04584 19.5809 8.55447 20.3349C8.38874 20.5862 8.23117 20.8144 8.08761 21.0217C7.66277 21.6158 8.58949 21.7583 9.06218 21.8324C10.8129 22.115 13.2639 22.2957 16.0102 22.2957C18.7565 22.2957 21.2052 22.1196 22.9582 21.8324C24.1791 21.6344 24.0822 21.3031 23.5897 20.5584C23.0819 19.7929 22.7038 19.1791 22.44 18.3718C22.1762 17.5646 22.0467 16.6496 22.0467 15.3119V10.7082C22.0442 9.11807 21.4069 7.59366 20.2742 6.4688C19.1414 5.34394 17.6057 4.71031 16.0032 4.70663H15.9997ZM16.0032 2C18.3263 2.01068 20.551 2.93195 22.1926 4.56308C23.8342 6.19422 24.7596 8.40302 24.7673 10.7082V15.3166C24.7673 16.3589 24.8502 17.0214 25.0217 17.5414C25.1933 18.0614 25.4711 18.5085 25.8528 19.0829C26.1294 19.501 26.4048 19.8647 26.6289 20.1623C27.1588 20.8642 27.5136 21.3344 27.4996 21.976V22.0061C27.4996 23.2234 25.9263 24.0908 23.3854 24.4985C21.4713 24.8089 18.858 25 16.0009 25C13.1437 25 10.5304 24.8089 8.61516 24.4985C6.07428 24.0874 4.50214 23.2245 4.50214 22.0061V21.9957C4.46829 21.3286 4.83944 20.8306 5.40434 20.0766C5.64944 19.7489 5.95057 19.3447 6.26686 18.8629C6.61701 18.3267 6.86094 17.9201 7.001 17.4325C7.15039 16.9091 7.21575 16.2153 7.21575 15.0884V10.7082C7.22192 8.40035 8.14864 6.18875 9.79334 4.55693C11.438 2.92511 13.6669 2.00581 15.9927 2H16.0032Z"}),s.createElement("path",{d:"M20.4988 26C20.4489 27.0446 19.9795 28.0338 19.1834 28.7721C18.7655 29.1614 18.2692 29.4702 17.7228 29.6809C17.1765 29.8916 16.5909 30 15.9994 30C15.408 30 14.8223 29.8916 14.276 29.6809C13.7296 29.4702 13.2333 29.1614 12.8154 28.7721C12.0193 28.0338 11.5499 27.0446 11.5 26C12.3651 26.0703 13.3047 26.1198 14.2916 26.1473C14.3561 26.4337 14.5025 26.6985 14.7154 26.9139C14.9283 27.1293 15.1998 27.2872 15.5013 27.371C15.8027 27.4548 16.1228 27.4613 16.4279 27.3898C16.733 27.3184 17.0116 27.1716 17.2345 26.9651C17.4739 26.7413 17.6382 26.4575 17.7072 26.1484C18.6941 26.1209 19.6337 26.0714 20.5 26.0011"}))}let ee,te,ne=e=>e;function oe({Icon:t,Badge:n=J,onClick:o,storeId:r,counter:i}){const a=e({storeId:r}),c=D(),{icon:l}=c,s=g(ee||(ee=ne`
    display: block;
    cursor: pointer;
    position: relative !important;
    width: ${0} !important;
  `),l.width),u=g(te||(te=ne`
    position: relative !important;

    & > * {
      height: 100%;
      width: 100%;
    }
  `));return v("a",{role:"button",onClick:()=>{null==a||a.markAllAsSeen(),o()},css:[H,s],"aria-label":"Notifications","data-testid":"bell","data-magicbell-bell":!0},v("div",{css:u},y(t)?v(Q,null):t),a&&v(n,{count:"unread"===i?null==a?void 0:a.unreadCount:null==a?void 0:a.unseenCount}))}const re=u("MAGICBELL_NO_PROVIDER"),ie=u({}),ae=()=>d(ie),ce=u({}),le=ce.Provider,se=()=>d(ce);function ue(){const e=se();return f((t,n)=>C(n,t.split("."),e),[e])}const de={header:{title:"BENACHRICHTIGUNGEN","mark-all-read":"Alle als gelesen markieren"},notification:{"mark-as-read":"Als gelesen markieren","mark-as-unread":"Als ungelesen markieren",delete:"Löschen"},"web-push-notifications":{notice:"Wenn Sie Browser-Benachrichtigungen aktivieren, bleiben Sie noch besser auf dem Laufenden.","enable-now":"Aktivieren"},messages:{"empty-inbox":"Alles Sauber!<br>Wir melden uns, wenn's was neues gibt!"},preferences:{title:"Einstellungen",toggle:"Benachrichtigungseinstellungen"}},fe={header:{title:"NOTIFICACIONES","mark-all-read":"Marcar todo como leído"},notification:{"mark-as-read":"Marcar como leído","mark-as-unread":"Marcar como no leído",delete:"Eliminar"},"web-push-notifications":{notice:"Active notificaciones en su navegador para mantenerse actualizado","enable-now":"Activar"},messages:{"empty-inbox":"¡No tiene notificaciones!<br>Le haremos saber cuando llegue una."},preferences:{title:"PREFERENCIAS",toggle:"Preferencias de notificación"}},pe={header:{title:"NOTIFICAÇÕES","mark-all-read":"Marcar tudo como lido"},notification:{"mark-as-read":"Marcar como lido","mark-as-unread":"Marcar como não lido",delete:"Apagar"},"web-push-notifications":{notice:"Ao ativar as notificações do navegador, você ficará ainda melhor atualizado.","enable-now":"Ativar"},messages:{"empty-inbox":"Nenhuma notificação disponível!","server-error":"Não conseguimos recuperar suas notificações.<br>Por favor, volte em breve.","no-internet-connection":"Não conseguimos nos conectar à Internet.<br>Por favor, verifique sua conexão."},preferences:{title:"Preferências",toggle:"Preferências de notificação"}},me=["children","theme","images","locale"];function he(e){let{children:n,theme:o={},images:r,locale:i="en"}=e,a=L(e,me);const c=function(e){const t="string"==typeof e?e:e.name;!function(e){const t=e.toLowerCase().replace("_","-");E.locale(t)}(t);const n={es:fe,pt_BR:pe,de};return"string"==typeof e?n[e]:x(n,{[t]:e.translations})[t]}(i);return s.createElement(re.Provider,{value:"DEFAULT_MAGICBELL"},s.createElement(le,{value:c},s.createElement(V,{value:x(F,o)},s.createElement(ie.Provider,{value:{images:r}},s.createElement(t,z({},a),n)))))}const be=["children","apiKey"];function ge(e){let{children:t,apiKey:n}=e,o=L(e,be);return"MAGICBELL_NO_PROVIDER"===d(re)?n?s.createElement(he,z({apiKey:n},o),t):null:s.createElement(s.Fragment,null,t)}const ve=["children","BellIcon","Badge","defaultIsOpen","onNewNotification","onToggle","bellCounter"];function ye(e){let{children:t,BellIcon:o,Badge:r,defaultIsOpen:i=!1,onNewNotification:a,onToggle:c,bellCounter:l="unseen"}=e,u=L(e,ve);const d=p(null),[f,m]=b(i),h=()=>{m(),null==c||c(f)};return n("notifications.new",e=>{null==a||a(e)}),s.createElement(ge,z({},u),s.createElement("div",null,s.createElement("div",{ref:d,"aria-expanded":f},s.createElement(oe,{onClick:h,Icon:o,Badge:r,counter:l})),f&&t({isOpen:f,toggle:h,launcherRef:d})))}let Ce,xe=e=>e;function we({notification:e}){const{sanitizedContent:t}=e,n=p(null);return m(()=>{if(!n.current)return;const e=n.current.querySelectorAll("time[datetime]");return e.length>0&&_(e),()=>{O()}},[t]),t&&""!==t.replace(/(\n|\s|\r)/gi,"")?v("article",{ref:n,css:g(Ce||(Ce=xe`
        color: inherit !important;
        cursor: inherit;
        margin: 0;
        line-height: 1.2;
        font-size: 0.865em !important;
        margin-top: 1em !important;
        word-break: break-word !important;
      `)),dangerouslySetInnerHTML:{__html:t}}):null}function ke({id:e,defaultMessage:t,html:n=!1}){const o=se(),r=C(t,e.split("."),o);return n?s.createElement("span",{dangerouslySetInnerHTML:{__html:r}}):s.createElement(s.Fragment,null,r)}let Ee,_e=e=>e;function Oe({notification:e}){const{isRead:t,markAsUnread:n,markAsRead:o}=e,r=D(),{container:i,notification:a}=r;return v("div",{css:g(Ee||(Ee=_e`
        background: ${0} !important;
        border-radius: ${0} !important;
        box-shadow: 2px 2px 3px ${0};
        color: ${0} !important;
        font-family: ${0} !important;
        font-size: ${0} !important;
        text-transform: ${0} !important;
        min-width: 10em;

        a {
          display: block;
          padding: 0.75em 1.25em !important;

          &:hover {
            text-decoration: underline !important;
          }
        }
      `),i.backgroundColor,a.default.borderRadius,G(W(i.backgroundColor,.5),10),a.default.textColor,a.default.fontFamily,a.default.fontSize,a.default.textTransform)},v("a",{onClick:()=>t?n():o()},v(ke,e.isRead?{id:"notification.mark-as-unread",defaultMessage:"Mark as unread"}:{id:"notification.mark-as-read",defaultMessage:"Mark as read"})),v("a",{onClick:()=>e.delete()},v(ke,{id:"notification.delete",defaultMessage:"Delete"})))}function Ae({closeOnClick:e=!1,children:t,isOpen:n,launcher:o,launcherRef:r,offset:i={skidding:0,distance:10},onClickOutside:a,placement:c="bottom-end",popperOptions:l,zIndex:u=9999,trigger:d="mouseenter focus"}){return s.createElement(A,z({render:t,offset:[i.skidding,i.distance],onClickOutside:()=>{null==a||a()},placement:c,popperOptions:l,reference:r,interactive:!e,zIndex:u},void 0!==n?{visible:n}:{trigger:d}),o)}function je(){return s.createElement("svg",{viewBox:"0 0 512 512"},s.createElement("circle",{cx:"256",cy:"256",r:"64"}))}function Me(){return s.createElement("svg",{viewBox:"0 0 512 512"},s.createElement("circle",{cx:"256",cy:"64",r:"64"}),s.createElement("circle",{cx:"256",cy:"256",r:"64"}),s.createElement("circle",{cx:"256",cy:"448",r:"64"}))}let $e,Re=e=>e;function Se({notification:e,menuPlacement:t="bottom-end"}){const n=D(),{header:o,notification:r}=n,[i,a]=h(!1),c=v("div",{css:g($e||($e=Re`
        display: flex !important;
        align-items: center !important;
        padding: 0.5em 0 0.5em 0.25em !important;
        color: ${0} !important;

        svg {
          height: 1.5em;
          fill: currentColor;
        }
      `),e.isRead?W(r.default.textColor,.5):o.backgroundColor),onMouseOver:()=>a(!0),onMouseLeave:()=>a(!1)},v(e.isRead||i?Me:je,null));return v(Ae,{launcher:c,offset:{skidding:-4,distance:2},placement:t,zIndex:0},()=>v(Oe,{notification:e}))}E.extend(M),E.extend($),E.extend(R),E.updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"%ds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"}});let Ie,Pe=e=>e;function ze({date:e}){const t=D(),{container:n,notification:o}=t;return v("span",{css:g(Ie||(Ie=Pe`
        background: ${0} !important;
        border-radius: ${0} !important;
        box-shadow: 2px 2px 3px ${0};
        color: ${0} !important;
        font-size: 0.8em !important;
        padding: 0.5em !important;
        text-transform: ${0};
      `),n.backgroundColor,o.default.borderRadius,G(W(n.backgroundColor,.5),10),o.default.textColor,o.default.textTransform)},e.format("LL LT"))}function Le({date:e,tooltipPlacement:t="bottom-end"}){const[n]=h(()=>function(e){return E(e)}(e)),[o,r]=h(n.fromNow(!0));return j(()=>r(n.fromNow(!0)),6e4),s.createElement(Ae,{launcher:s.createElement("div",null,o),placement:t},()=>s.createElement(ze,{date:n}))}function Ne(e){e.actionUrl&&window.open(e.actionUrl,"_self")}let Te,Fe=e=>e;function Be({notification:e}){const{title:t}=e;return v("p",{title:t,css:g(Te||(Te=Fe`
        cursor: inherit;
        font-weight: 500 !important;
        line-height: 1.2 !important;
        word-break: break-word !important;
      `))},t)}let Ve,De=e=>e;function Ue({notification:e,children:t}){const n=D(),{notification:o}=n;let r=o.default;e.isSeen?e.isRead||(r=o.unread):r=o.unseen;const i=g(Ve||(Ve=De`
    background-color: ${0} !important;
    border-radius: ${0};
    color: ${0} !important;
    cursor: pointer;
    display: flex;
    align-items: center;
    font-family: ${0} !important;
    font-size: ${0};
    margin: 4px !important;
    overflow: hidden;
    text-align: ${0} !important;
    text-transform: ${0};
    transition: background-color 300ms ease-out;
    padding: 16px 20px !important;
    min-height: 32px;

    &:hover {
      background-color: ${0} !important;
    }

    & > button {
      flex: 1;
      display: inline-flex;
      align-items: center;
      margin: 0 0 0 -16px;
      text-align: inherit !important;

      & > div {
        margin: 0 0 0 16px;
      }

      & > div:first-of-type {
        flex: 1;
      }
    }
  `),e.isSeen&&e.isRead?"transparent":W(r.backgroundColor,r.backgroundOpacity),r.borderRadius,r.textColor,r.fontFamily,r.fontSize,r.textAlign,r.textTransform,G(W(r.backgroundColor,r.backgroundOpacity),5));return v("div",{css:[H,i]},t)}let He,We=e=>e;function Ge({notification:e,onClick:t}){const n=o(e);return v(Ue,{notification:n},v("button",{onClick:()=>{n.markAsRead(),t?t(n):Ne(n)}},v("div",null,v(Be,{notification:n}),v(we,{notification:n})),v("div",{css:g(He||(He=We`
            padding: 0.5em 0 0.5em 0.25em !important;
          `))},n.sentAt?v(Le,{date:n.sentAt}):null)),v(Se,{notification:n}))}var qe=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,o){return e[0]===t&&(n=o,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(t,n){var o=e(this.__entries__,t);~o?this.__entries__[o][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,o=e(n,t);~o&&n.splice(o,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,o=this.__entries__;n<o.length;n++){var r=o[n];e.call(t,r[1],r[0])}},t}()}(),Ke="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Xe="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Ze="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Xe):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},Ye=["top","right","bottom","left","width","height","size","weight"],Je="undefined"!=typeof MutationObserver,Qe=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,o=!1,r=0;function i(){n&&(n=!1,e()),o&&c()}function a(){Ze(i)}function c(){var e=Date.now();if(n){if(e-r<2)return;o=!0}else n=!0,o=!1,setTimeout(a,20);r=e}return c}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){Ke&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Je?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Ke&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Ye.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),et=function(e,t){for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},tt=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Xe},nt=at(0,0,0,0);function ot(e){return parseFloat(e)||0}function rt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+ot(e["border-"+n+"-width"])},0)}var it="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof tt(e).SVGGraphicsElement}:function(e){return e instanceof tt(e).SVGElement&&"function"==typeof e.getBBox};function at(e,t,n,o){return{x:e,y:t,width:n,height:o}}var ct=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=at(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e,t=(e=this.target,Ke?it(e)?function(e){var t=e.getBBox();return at(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return nt;var o=tt(e).getComputedStyle(e),r=function(e){for(var t={},n=0,o=["top","right","bottom","left"];n<o.length;n++){var r=o[n];t[r]=ot(e["padding-"+r])}return t}(o),i=r.left+r.right,a=r.top+r.bottom,c=ot(o.width),l=ot(o.height);if("border-box"===o.boxSizing&&(Math.round(c+i)!==t&&(c-=rt(o,"left","right")+i),Math.round(l+a)!==n&&(l-=rt(o,"top","bottom")+a)),!function(e){return e===tt(e).document.documentElement}(e)){var s=Math.round(c+i)-t,u=Math.round(l+a)-n;1!==Math.abs(s)&&(c-=s),1!==Math.abs(u)&&(l-=u)}return at(r.left,r.top,c,l)}(e):nt);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),lt=function(e,t){var n,o,r,i,a,c,l,s=(o=(n=t).x,r=n.y,i=n.width,a=n.height,c="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(c.prototype),et(l,{x:o,y:r,width:i,height:a,top:r,right:o+i,bottom:a+r,left:o}),l);et(this,{target:e,contentRect:s})},st=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new qe,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof tt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new ct(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof tt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new lt(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ut="undefined"!=typeof WeakMap?new WeakMap:new qe,dt=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Qe.getInstance(),o=new st(t,n,this);ut.set(this,o)};["observe","unobserve","disconnect"].forEach(function(e){dt.prototype[e]=function(){var t;return(t=ut.get(this))[e].apply(t,arguments)}});var ft=void 0!==Xe.ResizeObserver?Xe.ResizeObserver:dt;function pt(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:"18px",height:"18px",viewBox:"0 0 24 24",stroke:"currentColor"},s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))}let mt,ht=e=>e;function bt({onClick:e}){return v("button",{onClick:()=>{e()},"aria-label":"close notification",css:g(mt||(mt=ht`
        display: flex;
        align-items: center;

        svg {
          height: 24px;
        }
      `))},v(pt,null))}let gt,vt=e=>e;function yt({onClick:e}){const t=D();return v("button",{css:g(gt||(gt=vt`
        padding: 10px !important;
        border-radius: 4px !important;
        background: ${0} !important;
        color: ${0} !important;
      `),t.footer.backgroundColor,t.footer.textColor),onClick:()=>{e()}},v(ke,{id:"web-push-notifications.enable-now",defaultMessage:"Enable Now"}))}let Ct,xt=e=>e;function wt(){const e=r(),{channels:t}=e,n=C(!1,["webPush","enabled"],t),{getState:o}=i,{apiKey:a,userEmail:c,userExternalId:l}=o(),s=D(),{footer:u}=s,{notification:d}=s,[f,p]=I(`magicbell:${a}:web-push-requested-at`,null);return f||!n?null:v("div",{css:g(Ct||(Ct=xt`
        padding: 14px 24px !important;
        display: flex;
        text-align: left;
        align-items: center;
        background: ${0};

        color: ${0} !important;
        font-family: ${0} !important;
        text-align: ${0} !important;
        font-size: ${0} !important;

        & > * {
          margin-left: 1em;
        }
      `),W(d.unseen.backgroundColor,.1),d.unseen.textColor,u.fontFamily,u.textAlign,u.fontSize)},v("p",{style:{flex:1}},v(ke,{id:"web-push-notifications.notice",defaultMessage:"By enabling browser notifications, you’ll stay up to date even better."})),v(yt,{onClick:()=>{const e=w(["webPush","config","subscribeUrl"],t),n=S.getUri({url:e,params:{user_email:c,user_external_id:l,background_color:s.header.backgroundColor,text_color:s.header.textColor}});p(Date.now()),function(e){const t=(screen.height-400)/4,n=(screen.width-600)/2;window.open(e,"",`width=600,height=400,scrollbars=no,top=${t},left=${n}`)}(n)}}),v(bt,{onClick:()=>{p(Date.now())}}))}function kt(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 516 100",role:"img","aria-label":"MagicBell logo",fill:"currentColor",width:"64",height:"16"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.77 72.8a1.73 1.73 0 01-1.53-2.61l2.79-5s0 .09 4.22-7.55c3.2-5.42 6.2-12.25 6.2-20.25V26.6c0-11.05 9-26.6 26.61-26.6 9.88 0 17 4.49 21.39 10.52a.68.68 0 01.36.09l9.64 2.69a2.55 2.55 0 011.17 4.23l-5.93 6c.09 1.08.18 2.06.18 3.14v10.7c0 7.46 2.52 13.84 5.3 19l3.78 8.27s0-.09 2.6 5.57a1.76 1.76 0 01-1.61 2.52l-75.17.07zM18.85 62h2.24c4.86 0 36-4.49 36-33.34 0-7.64-5.66-17.08-17.07-17.08s-17.08 10-17.08 17.08v6.92c0 5.12-.09 10.52-2.42 16.72-.9 2.24-2.25 5-3.24 7a1.84 1.84 0 001.57 2.7zm-1 21.58a1.59 1.59 0 00-1.51 2.2v.1a22.83 22.83 0 005.35 7.37 25.108 25.108 0 008.07 5 26.818 26.818 0 0019.06 0 25.27 25.27 0 008.08-5 23 23 0 005.35-7.37v-.1a1.578 1.578 0 00-1.51-2.2h-7.46a2 2 0 00-1.58.86 13.63 13.63 0 01-1.92 2.18 15 15 0 01-4.79 3 15.87 15.87 0 01-11.3 0 15 15 0 01-4.79-3 14.157 14.157 0 01-1.92-2.18 1.93 1.93 0 00-1.53-.86h-7.6z"}),s.createElement("path",{d:"M491.772 9.82h-6.29a1.8 1.8 0 00-1.8 1.8v60.21a1.8 1.8 0 001.8 1.8h6.29a1.8 1.8 0 001.8-1.8V11.62a1.8 1.8 0 00-1.8-1.8zM180.451 73.63h-6.29a1.798 1.798 0 01-1.8-1.79V25.38a.448.448 0 00-.654-.396.45.45 0 00-.206.216l-12.92 29.54a1.787 1.787 0 01-1.65 1.07h-7.48a1.777 1.777 0 01-1.65-1.07L134.621 25a.45.45 0 00-.86.18v46.66a1.799 1.799 0 01-1.8 1.79h-6.29a1.798 1.798 0 01-1.8-1.79V11.62a1.811 1.811 0 011.8-1.8h11.88a1.8 1.8 0 011.65 1.08l13.55 30.83a.447.447 0 00.415.276.449.449 0 00.415-.276l13.27-30.82a1.821 1.821 0 011.66-1.09h11.94a1.8 1.8 0 011.8 1.8v60.22a1.8 1.8 0 01-.528 1.27 1.781 1.781 0 01-1.272.52zm333.2-63.81h-6.29a1.8 1.8 0 00-1.8 1.8v60.21a1.8 1.8 0 001.8 1.8h6.29a1.8 1.8 0 001.8-1.8V11.62a1.8 1.8 0 00-1.8-1.8zm-93.279 40.23a14.48 14.48 0 00-2.78-4.86 15.75 15.75 0 00-4.68-3.59 10.513 10.513 0 00-1.46-.6 20.37 20.37 0 00-2.57-.85c-.934-.15-1.876-.25-2.82-.3a.22.22 0 01-.22-.22.216.216 0 01.133-.213.218.218 0 01.087-.017 11.75 11.75 0 002.22-.57c.42-.16.84-.34 1.25-.53a11.27 11.27 0 001.09-.56 15.782 15.782 0 003.5-2.87 12.28 12.28 0 002.48-3.87c.626-1.574.932-3.257.9-4.95 0-5.31-2-9.27-5.85-12.06-3.85-2.79-9.09-4.13-15.75-4.13h-13.69a1.788 1.788 0 00-1.76 1.76h-.27v60.21a1.81 1.81 0 001.79 1.81h17.29c2.918.034 5.826-.36 8.63-1.17a21.302 21.302 0 007-3.43 14.7 14.7 0 004.69-5.58 16.826 16.826 0 001.7-7.83 16.552 16.552 0 00-.91-5.58zm-30.05-29.61a1.807 1.807 0 011.8-1.8h3.41a13.8 13.8 0 017.92 2.07c2 1.36 3 3.51 3 6.39a8.546 8.546 0 01-2.61 6.57c-1.72 1.63-4.32 2.43-7.74 2.43h-4a1.802 1.802 0 01-1.8-1.79l.02-13.87zm17.18 41.76c-1.88 1.8-4.67 2.7-8.45 2.7h-6.84a1.81 1.81 0 01-1.8-1.8V46.63a1.807 1.807 0 011.8-1.8h5.94c3.95 0 6.93.9 9 2.71a9.076 9.076 0 013.07 7.29 10.015 10.015 0 01-2.72 7.37zm-58.891-34.04a22 22 0 018 1.35 20.286 20.286 0 015.84 3.41 16.373 16.373 0 013.77 4.58 18.482 18.482 0 011.62 3.69.928.928 0 01-.9 1.17h-7.91a1.897 1.897 0 01-1.62-1 9.8 9.8 0 00-4-3.87 12.139 12.139 0 00-13.3 2.16 15.26 15.26 0 00-4.4 11.06 14.872 14.872 0 006.74 12.59 11.998 11.998 0 006.25 1.7c2.78 0 4.94-.63 6.47-2a12.785 12.785 0 002.87-3.51 1.736 1.736 0 011.53-.9h7.88a.892.892 0 01.81 1.26 27.933 27.933 0 01-2.07 4.41 20.468 20.468 0 01-4 4.76 19.534 19.534 0 01-5.84 3.33 23.275 23.275 0 01-7.82 1.25 24.747 24.747 0 01-9-1.61 19.527 19.527 0 01-7.19-4.68 20.684 20.684 0 01-4.76-7.19 24 24 0 01-1.71-9.34c-.029-2.97.507-5.92 1.58-8.69a22.502 22.502 0 014.49-7.19 20.002 20.002 0 017.1-4.86 22.152 22.152 0 019.57-1.88zM311.352 9.98h-1.07a5.02 5.02 0 00-5.02 5.02v.03a5.02 5.02 0 005.02 5.02h1.07a5.02 5.02 0 005.02-5.02V15a5.02 5.02 0 00-5.02-5.02zm2.529 18.34h-6.21a1.8 1.8 0 00-1.8 1.8V72a1.8 1.8 0 001.8 1.8h6.21a1.8 1.8 0 001.8-1.8V30.12a1.8 1.8 0 00-1.8-1.8zm138.419-.16a21 21 0 019.54 2 20.408 20.408 0 016.67 5.13 20.992 20.992 0 013.87 7.12 24.435 24.435 0 011.26 8v1.17a1.811 1.811 0 01-1.8 1.8h-29.18a1.855 1.855 0 00-1.393.669 1.855 1.855 0 00-.407 1.49c.174.898.446 1.773.81 2.61a13.625 13.625 0 002.79 4 13.852 13.852 0 004.05 2.7 11.237 11.237 0 004.87 1 11.88 11.88 0 005.58-1.26 11.46 11.46 0 003.42-2.88 1.883 1.883 0 011.44-.72h7.93a.917.917 0 01.916.896.912.912 0 01-.106.455 34.624 34.624 0 01-2.11 3.37 17.758 17.758 0 01-4.15 4.05 20.816 20.816 0 01-5.67 2.79 22.407 22.407 0 01-7.2 1.08 23.368 23.368 0 01-9.1-1.71 22.352 22.352 0 01-7.2-4.77 22.07 22.07 0 01-4.68-7.29 26.313 26.313 0 01-1.71-9.37 24.373 24.373 0 011.44-8.55 22.56 22.56 0 014.27-7.12A20.252 20.252 0 01443.2 30a21.319 21.319 0 019.1-1.84zm0 7.47a10.74 10.74 0 00-4.6.9 12.005 12.005 0 00-3.51 2.34 10.581 10.581 0 00-2.34 3.34 9.559 9.559 0 00-.63 1.71 1.745 1.745 0 00.278 1.563 1.739 1.739 0 001.432.687h18.64a1.77 1.77 0 001.71-2.25 11.534 11.534 0 00-6.57-7.48 11.661 11.661 0 00-4.41-.81zM228.341 30v4a.438.438 0 01-.287.423.44.44 0 01-.493-.133c-.46-.52-1-1-1.48-1.58a14.818 14.818 0 00-3-2.31 17.44 17.44 0 00-3.88-1.65 17.008 17.008 0 00-4.81-.62 20.608 20.608 0 00-8.18 1.64 20.917 20.917 0 00-6.76 4.62 21.275 21.275 0 00-4.58 7.11 24.481 24.481 0 00-1.69 9.26 25.154 25.154 0 001.82 10 21.997 21.997 0 004.76 7.16 19.298 19.298 0 006.59 4.32 19.886 19.886 0 007.29 1.42 17.14 17.14 0 008.86-2.09 23.029 23.029 0 005.05-4 .45.45 0 01.77.31v4a1.798 1.798 0 001.8 1.79h6.33a1.8 1.8 0 001.8-1.79V30a1.803 1.803 0 00-1.8-1.79h-6.29a1.8 1.8 0 00-1.82 1.79zm0 25.5a10.7 10.7 0 01-.44 1.23 14.142 14.142 0 01-2.8 4.36 12.612 12.612 0 01-4 2.84 14.359 14.359 0 01-5.73 1 12.366 12.366 0 01-4.79-1.18 11.64 11.64 0 01-4-3.21 13.211 13.211 0 01-2.4-4.54 18.2 18.2 0 01-.75-5.2c.002-1.735.276-3.46.81-5.11a13.713 13.713 0 012.4-4.54 11.64 11.64 0 014-3.21 12.939 12.939 0 015.81-1.24 12.002 12.002 0 014.9 1 11.71 11.71 0 014 2.88 13.68 13.68 0 012.67 4.54c.136.357.253.72.35 1.09.43 1.56.642 3.172.63 4.79a14.914 14.914 0 01-.66 4.45v.05zm55.03-25.5v4a.452.452 0 01-.79.29c-.45-.52-.94-1-1.48-1.58a14.54 14.54 0 00-3-2.31 17.35 17.35 0 00-3.87-1.65 17.003 17.003 0 00-4.81-.62 20.618 20.618 0 00-14.9 6.23 21.29 21.29 0 00-4.58 7.11 24.321 24.321 0 00-1.69 9.26c-.08 3.422.54 6.825 1.82 10a21.996 21.996 0 004.76 7.16 19.372 19.372 0 006.58 4.32 19.998 19.998 0 007.3 1.42 17.07 17.07 0 008.85-2.09 22.993 22.993 0 005.06-4 .45.45 0 01.77.31v6.37c.01.19.01.38 0 .57a12.692 12.692 0 01-12.74 12 16.071 16.071 0 01-9.47-2.79 5.679 5.679 0 01-1.83-2.15 1.825 1.825 0 00-1.68-1.19h-7.52a.906.906 0 00-.859.626.893.893 0 00-.041.374c.144 1.849.69 3.644 1.6 5.26.215.396.452.78.71 1.15 3.8 5.5 11.63 8.69 19.05 8.69a22.599 22.599 0 0022.62-21.39V30a1.782 1.782 0 00-1.086-1.696 1.798 1.798 0 00-.694-.144h-6.29a1.794 1.794 0 00-1.668 1.14 1.783 1.783 0 00-.122.7zm-.44 26.73a14.162 14.162 0 01-2.81 4.27 12.523 12.523 0 01-4 2.85c-1.497.67-3.12 1.01-4.76 1a12.908 12.908 0 01-5.74-1.21 11.688 11.688 0 01-4.05-3.21 12.992 12.992 0 01-2.36-4.43 18.2 18.2 0 01-.75-5.2 16.662 16.662 0 01.8-5.11 13.732 13.732 0 012.4-4.54 11.69 11.69 0 014.05-3.21 12.911 12.911 0 015.74-1.24 12.063 12.063 0 014.9 1 11.701 11.701 0 014 2.88 13.663 13.663 0 012.67 4.54c.13.36.25.72.35 1.09a17.43 17.43 0 01.63 4.66V51a14.9 14.9 0 01-.63 4.42c-.125.427-.272.848-.44 1.26v.05z"}))}function Et(){const e=r(e=>e.inbox);return C(!1,["features","noMagicbellBranding","enabled"],e)?s.createElement("p",{style:{height:"20px"}}):s.createElement("a",{href:"https://magicbell.io/?utm_source=widget",target:"_blank",rel:"noopener noreferrer"},s.createElement(kt,null))}let _t,Ot=e=>e;function At({children:e}){const t=D(),{footer:n}=t,o=g(_t||(_t=Ot`
    background: ${0};
    color: ${0} !important;
    font-family: ${0} !important;
    text-align: ${0} !important;
    font-size: ${0} !important;
    padding: 12px 24px !important;
    flex-shrink: 0 !important;

    &:first-of-type {
      border-radius: ${0} ${0} 0 0 !important;
    }

    &:last-of-type {
      border-radius: 0 0 ${0} ${0}!important;
    }

    span {
      color: ${0} !important;

      a {
        color: ${0};
        margin-right: 16px !important;
        opacity: 0.75;
        display: block;
      }
    }
  `),W(n.backgroundColor,n.backgroundOpacity),W(n.textColor,.75),n.fontFamily,n.textAlign,n.fontSize,n.borderRadius,n.borderRadius,n.borderRadius,n.borderRadius,n.textColor,n.textColor);return v("div",{css:[H,o]},e)}let jt,Mt=e=>e;function $t({children:e}){const t=D(),{footer:n}=t,o=g(jt||(jt=Mt`
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: ${0} !important;

    a,
    button {
      color: ${0};
      display: block;
    }

    a {
      opacity: 0.85;
    }
  `),n.textColor,n.textColor);return v(At,null,v("div",{css:o},v(Et,null),e))}function Rt(){return s.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M12 14.8636C13.5815 14.8636 14.8636 13.5815 14.8636 12C14.8636 10.4184 13.5815 9.13635 12 9.13635C10.4184 9.13635 9.13635 10.4184 9.13635 12C9.13635 13.5815 10.4184 14.8636 12 14.8636Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M19.0636 14.8636C18.9366 15.1515 18.8987 15.4709 18.9548 15.7806C19.011 16.0902 19.1586 16.3759 19.3786 16.6009L19.4359 16.6582C19.6134 16.8355 19.7542 17.046 19.8503 17.2778C19.9464 17.5096 19.9958 17.758 19.9958 18.0089C19.9958 18.2597 19.9464 18.5082 19.8503 18.7399C19.7542 18.9717 19.6134 19.1822 19.4359 19.3595C19.2586 19.537 19.0481 19.6779 18.8163 19.7739C18.5845 19.87 18.3361 19.9195 18.0852 19.9195C17.8343 19.9195 17.5859 19.87 17.3542 19.7739C17.1224 19.6779 16.9118 19.537 16.7345 19.3595L16.6773 19.3023C16.4523 19.0822 16.1666 18.9346 15.8569 18.8785C15.5473 18.8223 15.2279 18.8602 14.94 18.9873C14.6577 19.1083 14.4169 19.3092 14.2473 19.5653C14.0777 19.8214 13.9867 20.1215 13.9855 20.4286V20.5909C13.9855 21.0972 13.7843 21.5828 13.4263 21.9408C13.0683 22.2989 12.5827 22.5 12.0764 22.5C11.57 22.5 11.0845 22.2989 10.7264 21.9408C10.3684 21.5828 10.1673 21.0972 10.1673 20.5909V20.505C10.1599 20.1891 10.0576 19.8826 9.87376 19.6256C9.68991 19.3685 9.43297 19.1727 9.13636 19.0636C8.84846 18.9366 8.52909 18.8987 8.21944 18.9548C7.90979 19.011 7.62406 19.1586 7.39909 19.3786L7.34182 19.4359C7.16451 19.6134 6.95396 19.7542 6.7222 19.8503C6.49044 19.9464 6.24202 19.9958 5.99114 19.9958C5.74025 19.9958 5.49183 19.9464 5.26007 19.8503C5.02831 19.7542 4.81776 19.6134 4.64045 19.4359C4.46295 19.2586 4.32214 19.0481 4.22607 18.8163C4.12999 18.5845 4.08054 18.3361 4.08054 18.0852C4.08054 17.8343 4.12999 17.5859 4.22607 17.3542C4.32214 17.1224 4.46295 16.9118 4.64045 16.7345L4.69773 16.6773C4.91779 16.4523 5.0654 16.1666 5.12155 15.8569C5.17769 15.5473 5.13979 15.2279 5.01273 14.94C4.89173 14.6577 4.69081 14.4169 4.43472 14.2473C4.17862 14.0777 3.87852 13.9867 3.57136 13.9855H3.40909C2.90277 13.9855 2.41718 13.7843 2.05916 13.4263C1.70114 13.0683 1.5 12.5827 1.5 12.0764C1.5 11.57 1.70114 11.0845 2.05916 10.7264C2.41718 10.3684 2.90277 10.1673 3.40909 10.1673H3.495C3.81095 10.1599 4.11737 10.0576 4.37442 9.87376C4.63148 9.68991 4.82727 9.43297 4.93636 9.13636C5.06343 8.84846 5.10133 8.52909 5.04519 8.21944C4.98904 7.90979 4.84142 7.62406 4.62136 7.39909L4.56409 7.34182C4.38659 7.16451 4.24578 6.95396 4.1497 6.7222C4.05363 6.49044 4.00418 6.24202 4.00418 5.99114C4.00418 5.74025 4.05363 5.49183 4.1497 5.26007C4.24578 5.02831 4.38659 4.81776 4.56409 4.64045C4.74139 4.46295 4.95194 4.32214 5.1837 4.22607C5.41546 4.12999 5.66389 4.08054 5.91477 4.08054C6.16566 4.08054 6.41408 4.12999 6.64584 4.22607C6.8776 4.32214 7.08815 4.46295 7.26545 4.64045L7.32273 4.69773C7.54769 4.91779 7.83342 5.0654 8.14307 5.12155C8.45272 5.17769 8.77209 5.13979 9.06 5.01273H9.13636C9.41869 4.89173 9.65947 4.69081 9.82907 4.43472C9.99867 4.17862 10.0897 3.87852 10.0909 3.57136V3.40909C10.0909 2.90277 10.292 2.41718 10.6501 2.05916C11.0081 1.70114 11.4937 1.5 12 1.5C12.5063 1.5 12.9919 1.70114 13.3499 2.05916C13.708 2.41718 13.9091 2.90277 13.9091 3.40909V3.495C13.9103 3.80216 14.0013 4.10226 14.1709 4.35835C14.3405 4.61445 14.5813 4.81536 14.8636 4.93636C15.1515 5.06343 15.4709 5.10133 15.7806 5.04519C16.0902 4.98904 16.3759 4.84142 16.6009 4.62136L16.6582 4.56409C16.8355 4.38659 17.046 4.24578 17.2778 4.1497C17.5096 4.05363 17.758 4.00418 18.0089 4.00418C18.2597 4.00418 18.5082 4.05363 18.7399 4.1497C18.9717 4.24578 19.1822 4.38659 19.3595 4.56409C19.537 4.74139 19.6779 4.95194 19.7739 5.1837C19.87 5.41546 19.9195 5.66389 19.9195 5.91477C19.9195 6.16566 19.87 6.41408 19.7739 6.64584C19.6779 6.8776 19.537 7.08815 19.3595 7.26545L19.3023 7.32273C19.0822 7.54769 18.9346 7.83342 18.8785 8.14307C18.8223 8.45272 18.8602 8.77209 18.9873 9.06V9.13636C19.1083 9.41869 19.3092 9.65947 19.5653 9.82907C19.8214 9.99867 20.1215 10.0897 20.4286 10.0909H20.5909C21.0972 10.0909 21.5828 10.292 21.9408 10.6501C22.2989 11.0081 22.5 11.4937 22.5 12C22.5 12.5063 22.2989 12.9919 21.9408 13.3499C21.5828 13.708 21.0972 13.9091 20.5909 13.9091H20.505C20.1978 13.9103 19.8977 14.0013 19.6416 14.1709C19.3856 14.3405 19.1846 14.5813 19.0636 14.8636V14.8636Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}))}let St,It=e=>e;function Pt({children:e}){const t=D(),{header:n}=t,o=g(St||(St=It`
    align-items: center;
    background: ${0} !important;
    color: ${0};
    display: flex;
    font-family: ${0} !important;
    font-size: ${0} !important;
    justify-content: space-between;
    text-align: ${0} !important;
    text-transform: ${0} !important;
    padding: 16px 24px !important;
    flex-shrink: 0 !important;

    &:first-of-type {
      border-radius: ${0} ${0} 0 0 !important;
    }

    &:last-of-type {
      border-radius: 0 0 ${0} ${0}!important;
    }
  `),W(n.backgroundColor,n.backgroundOpacity),n.textColor,n.fontFamily,n.fontSize,n.textAlign,n.textTransform,n.borderRadius,n.borderRadius,n.borderRadius,n.borderRadius);return v("div",{css:[H,o]},e)}let zt,Lt,Nt=e=>e;function Tt({title:e,actions:t}){return v(Pt,null,v("p",{role:"heading",css:g(zt||(zt=Nt`
          margin-right: 16px !important;
        `))},e),v("div",{css:g(Lt||(Lt=Nt`
          height: 14px;
          overflow: visible;
          display: flex;
          align-items: center;
        `))},t))}let Ft,Bt=e=>e;function Vt(){const e=D(),{images:t}=ae(),{notification:n}=e;return v("div",{css:g(Ft||(Ft=Bt`
        padding: 3em !important;
        text-align: center;
        color: ${0};

        img {
          margin: 2em auto;
          height: 200px;
        }
      `),n.default.textColor)},v("p",null,v(ke,{id:"messages.empty-inbox",defaultMessage:"All clear!<br>We'll let you know when there's more.",html:!0})),v("img",{src:(null==t?void 0:t.emptyInboxUrl)||"https://assets.magicbell.io/images/empty_inbox.png",alt:"No notifications"}))}function Dt({order:e,children:t}){return s.createElement(s.Fragment,null,e.map(e=>t.find(t=>(null==t?void 0:t.key)===e)))}let Ut,Ht=e=>e;function Wt(){return v("div",{css:g(Ut||(Ut=Ht`
        color: inherit !important;
        font-size: 0.85em !important;
        padding: 0.5em !important;
        text-align: center !important;
      `))},"Loading...")}function Gt({notifications:e,onItemClick:t,height:n,queryParams:o,scrollableTarget:r,ListItem:i=Ge}){return s.createElement(P,{dataLength:e.notifications.length,hasMore:e.hasNextPage,next:()=>e.fetchNextPage(o),loader:s.createElement(Wt,null),height:n,scrollableTarget:r},e.notifications.map(e=>s.createElement(i,{key:e.id,notification:e,onClick:t})))}function qt({onNotificationClick:e,store:t,height:n,NotificationItem:o}){const[r,i]=h(null),a=function(e,t){const[n,o]=h(t);return m(()=>{if(!e)return;const t=e instanceof Element?e:e.current;if(!t)return;const n=new ft(([e])=>{o(e.contentRect.height)});return n.observe(t),()=>n.disconnect()},[e,o]),n}(r,n);return v("div",{ref:i,css:{width:"100%",height:null!=n?n:"100%"}},v(Gt,{height:a,notifications:t,onItemClick:e,queryParams:t.context,ListItem:o}))}function Kt({layout:e,storeId:t,onNotificationClick:n,onAllRead:o,notificationPreferencesEnabled:i,NotificationItem:c,EmptyInboxPlaceholder:l=Vt,setView:s}){const u=ue(),d=r(),f=a(t);if(!f)return null;const p=!f.isEmpty,m=null!=i?i:C(!0,["features","notificationPreferences","enabled"],d.inbox);return v(Dt,{order:e},v(Tt,{key:"header",title:v(ke,{id:"header.title",defaultMessage:"NOTIFICATIONS"}),actions:p?v("button",{onClick:()=>{null==f||f.markAllAsRead(),null==o||o()}},v(ke,{id:"header.mark-all-read",defaultMessage:"Mark All Read"})):null}),v("div",{key:"content",css:{flex:1,overflowY:"hidden"}},f.lastFetchedAt?p?v(qt,{store:f,onNotificationClick:n,NotificationItem:c}):v(l,null):null),v(wt,{key:"push-notifications-banner"}),v($t,{key:"footer"},m?v("button",{onClick:()=>s("preferences"),"aria-label":u("preferences.toggle","Notification preferences")},v(Rt,null)):null))}function Xt({id:e,label:t,value:n=!1,onClick:o}){return s.createElement("div",null,t?s.createElement("label",{htmlFor:e,style:{marginRight:"14px"}},t):null,s.createElement("input",{id:e,type:"checkbox",onClick:()=>{o(!n)},defaultChecked:n}))}function Zt(e){return{inApp:"inapp",email:"email",webPush:"web-push",mobilePush:"mobile-push"}[e]||"inapp"}function Yt({category:e,channels:t}){const n=c(),o=e.replace(/([A-Z])/g," $1").replace(/(\W+)/g," ").replace(/^-|-$/g,"").toLowerCase().replace(/(^|\s)\S/g,e=>e.toUpperCase()).replace(/([._])/g," ");return s.createElement(s.Fragment,null,s.createElement("div",null,o),t.map(t=>s.createElement("div",{key:t},s.createElement(Xt,{id:`${e}-${Zt(t)}`,value:n.categories[e][t],onClick:o=>{n.save({categories:{[e]:{[t]:o}}})}}))))}let Jt,Qt,en,tn=e=>e;function nn(){const e=c(),t=g(Jt||(Jt=tn`
    opacity: 0.8;
    text-transform: uppercase;
    font-size: 0.7em !important;
  `));m(()=>{e.lastFetchedAt||e.fetch()},[e]);const n=function(e){const t=Object.values(e.categories);if(!t.length)return[];const n=t.reduce((e,t)=>z({},e,t));return Object.keys(n)}(e);return v("div",{css:g(Qt||(Qt=tn`
        flex: 1;
        padding: 16px 20px !important;
        height: 100%;
        overflow-y: auto;
      `))},v("div",{css:g(en||(en=tn`
          display: grid;
          gap: 1em;
          grid-template-columns: 2fr ${0};
        `)," 1fr".repeat(n.length).trim())},v("div",null),n.map(e=>v("div",{key:e,css:t},function(e){return{inApp:"IN-APP",email:"EMAIL",webPush:"WEB PUSH",mobilePush:"MOBILE PUSH"}[e]||e}(e))),Object.keys(e.categories).map(e=>v(Yt,{key:e,category:e,channels:n}))))}function on({layout:e,setView:t,NotificationPreferences:n=nn}){const o=ue();return v(Dt,{order:e},v(Tt,{key:"header",title:v(ke,{id:"preferences.title",defaultMessage:"PREFERENCES"}),actions:v("button",{onClick:()=>t("inbox"),"aria-label":"close"},v(pt,null))}),v("div",{key:"content",css:{flex:1,overflowY:"hidden"}},v(n,null)),v($t,{key:"footer"},v("button",{onClick:()=>t("inbox"),"aria-label":o("preferences.toggle","Notification preferences")},v(Rt,null))))}function rn(e){const t=D(),{container:n,header:o,footer:r}=t;let i=o;"footer"===e[0]?i=r:"container"===e[0]&&(i=n);let a=r;return"header"===e[e.length-1]?a=o:"container"===e[e.length-1]&&(a=n),[i.borderRadius,i.borderRadius,a.borderRadius,a.borderRadius]}let an,cn=e=>e;function ln({height:e,children:t,layout:n}){const o=D(),{container:r}=o,[i,a,c,l]=rn(n);return v("div",{css:[H,g(an||(an=cn`
          background-color: ${0};
          border-radius: ${0} ${0} ${0} ${0};
          color: ${0};
          display: flex;
          flex-direction: column;
          font-family: ${0} !important;
          height: ${0};
          overflow: hidden;
        `),r.backgroundColor,i,a,c,l,r.textColor,r.fontFamily,e?`${e}px`:"auto")]},t)}const sn=["height","layout"];function un(e){let{height:t,layout:n=["header","content","push-notifications-banner","footer"]}=e,o=L(e,sn);const[r,i]=h("inbox");return s.createElement(ln,{height:t,layout:n},s.createElement("preferences"===r?on:Kt,z({},o,{layout:n,setView:i})))}let dn,fn=e=>e;function pn({placement:e}){const t=D(),{header:n,footer:o}=t;return v("div",{"data-popper-arrow":!0,"data-popper-placement":e,css:g(dn||(dn=fn`
        &,
        &:before {
          position: absolute;
          width: 18px !important;
          height: 18px !important;
          z-index: -1;
          border-radius: 2px !important;
        }

        &:before {
          content: '';
          transform: rotate(45deg);
          left: 0;
        }

        &[data-popper-placement^='top'] {
          bottom: -4px;

          &:before {
            background: ${0};
          }
        }

        &[data-popper-placement^='bottom'] {
          top: -4px;

          &:before {
            background: ${0};
          }
        }

        &[data-popper-placement^='left'] {
          right: -4px;
        }

        &[data-popper-placement^='right'] {
          left: -4px;
        }
      `),n.backgroundColor,o.backgroundColor)})}let mn,hn=e=>e;function bn({width:e=400,children:t,attrs:n,layout:o}){const[r,i,a,c]=rn(o);return v("div",z({css:g(mn||(mn=hn`
        border-radius: ${0} ${0} ${0} ${0};
        box-shadow: 0px 20px 25px rgba(84, 95, 111, 0.1), 0px 10px 10px rgba(84, 95, 111, 0.04);
        width: ${0}px;
        max-width: calc(100vw - 10px);
        overflow: hidden;
      `),r,i,a,c,e)},n),t)}function gn({launcherRef:e,isOpen:t,toggle:n,placement:o="auto",width:r=500,closeOnClickOutside:i=!0,popperOptions:a,hideArrow:c=!1,layout:l=["header","content","push-notifications-banner","footer"],children:u}){return s.createElement(Ae,{isOpen:t,launcherRef:e,onClickOutside:()=>{i&&(null==n||n())},placement:o,popperOptions:a},e=>s.createElement(bn,{width:r,attrs:e,layout:l},u,c?null:s.createElement(pn,{placement:e["data-placement"]})))}const vn=["launcherRef","isOpen","toggle","placement","width","onNotificationClick","closeOnClickOutside","closeOnNotificationClick","popperOptions","hideArrow","layout"];function yn(e){let{launcherRef:t,isOpen:n,toggle:o,placement:r="auto",width:i=500,onNotificationClick:a,closeOnClickOutside:c=!0,closeOnNotificationClick:l=!0,popperOptions:u,hideArrow:d=!1,layout:f}=e,p=L(e,vn);return s.createElement(gn,{launcherRef:t,isOpen:n,toggle:o,placement:r,width:i,closeOnClickOutside:c,popperOptions:u,hideArrow:d,layout:f},s.createElement(un,z({onNotificationClick:e=>{a?a(e):Ne(e),l&&(null==o||o())},layout:f},p)))}var Cn,xn,wn=Object.prototype,kn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||wn)},En=(Cn=Object.keys,xn=Object,function(e){return Cn(xn(e))}),_n=Object.prototype.hasOwnProperty,On="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function An(e){var t={exports:{}};return e(t,t.exports),t.exports}var jn,Mn="object"==typeof On&&On&&On.Object===Object&&On,$n="object"==typeof self&&self&&self.Object===Object&&self,Rn=Mn||$n||Function("return this")(),Sn=Rn.Symbol,In=Object.prototype,Pn=In.hasOwnProperty,zn=In.toString,Ln=Sn?Sn.toStringTag:void 0,Nn=Object.prototype.toString,Tn=Sn?Sn.toStringTag:void 0,Fn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Tn&&Tn in Object(e)?function(e){var t=Pn.call(e,Ln),n=e[Ln];try{e[Ln]=void 0;var o=!0}catch(e){}var r=zn.call(e);return o&&(t?e[Ln]=n:delete e[Ln]),r}(e):function(e){return Nn.call(e)}(e)},Bn=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Vn=function(e){if(!Bn(e))return!1;var t=Fn(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Dn=Rn["__core-js_shared__"],Un=(jn=/[^.]+$/.exec(Dn&&Dn.keys&&Dn.keys.IE_PROTO||""))?"Symbol(src)_1."+jn:"",Hn=Function.prototype.toString,Wn=function(e){if(null!=e){try{return Hn.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Gn=/^\[object .+?Constructor\]$/,qn=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kn=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Bn(e)||function(e){return!!Un&&Un in e}(e))&&(Vn(e)?qn:Gn).test(Wn(e))}(n)?n:void 0},Xn=Kn(Rn,"DataView"),Zn=Kn(Rn,"Map"),Yn=Kn(Rn,"Promise"),Jn=Kn(Rn,"Set"),Qn=Kn(Rn,"WeakMap"),eo=Wn(Xn),to=Wn(Zn),no=Wn(Yn),oo=Wn(Jn),ro=Wn(Qn),io=Fn;(Xn&&"[object DataView]"!=io(new Xn(new ArrayBuffer(1)))||Zn&&"[object Map]"!=io(new Zn)||Yn&&"[object Promise]"!=io(Yn.resolve())||Jn&&"[object Set]"!=io(new Jn)||Qn&&"[object WeakMap]"!=io(new Qn))&&(io=function(e){var t=Fn(e),n="[object Object]"==t?e.constructor:void 0,o=n?Wn(n):"";if(o)switch(o){case eo:return"[object DataView]";case to:return"[object Map]";case no:return"[object Promise]";case oo:return"[object Set]";case ro:return"[object WeakMap]"}return t});var ao=io,co=function(e){return null!=e&&"object"==typeof e},lo=function(e){return co(e)&&"[object Arguments]"==Fn(e)},so=Object.prototype,uo=so.hasOwnProperty,fo=so.propertyIsEnumerable,po=lo(function(){return arguments}())?lo:function(e){return co(e)&&uo.call(e,"callee")&&!fo.call(e,"callee")},mo=Array.isArray,ho=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},bo=function(){return!1},go=An(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?Rn.Buffer:void 0;e.exports=(r?r.isBuffer:void 0)||bo}),vo={};vo["[object Float32Array]"]=vo["[object Float64Array]"]=vo["[object Int8Array]"]=vo["[object Int16Array]"]=vo["[object Int32Array]"]=vo["[object Uint8Array]"]=vo["[object Uint8ClampedArray]"]=vo["[object Uint16Array]"]=vo["[object Uint32Array]"]=!0,vo["[object Arguments]"]=vo["[object Array]"]=vo["[object ArrayBuffer]"]=vo["[object Boolean]"]=vo["[object DataView]"]=vo["[object Date]"]=vo["[object Error]"]=vo["[object Function]"]=vo["[object Map]"]=vo["[object Number]"]=vo["[object Object]"]=vo["[object RegExp]"]=vo["[object Set]"]=vo["[object String]"]=vo["[object WeakMap]"]=!1;var yo=An(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&Mn.process,i=function(){try{return o&&o.require&&o.require("util").types||r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=i}),Co=yo&&yo.isTypedArray,xo=Co?function(e){return function(t){return e(t)}}(Co):function(e){return co(e)&&ho(e.length)&&!!vo[Fn(e)]},wo=Object.prototype.hasOwnProperty,ko=function(e){if(null==e)return!0;if(function(e){return null!=e&&ho(e.length)&&!Vn(e)}(e)&&(mo(e)||"string"==typeof e||"function"==typeof e.splice||go(e)||xo(e)||po(e)))return!e.length;var t=ao(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(kn(e))return!function(e){if(!kn(e))return En(e);var t=[];for(var n in Object(e))_n.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e).length;for(var n in e)if(wo.call(e,n))return!1;return!0};function Eo(e){const{userEmail:t,userExternalId:n,userKey:o,apiKey:r}=i.getState(),a={"X-MAGICBELL-API-KEY":r};return ko(t)||(a["X-MAGICBELL-USER-EMAIL"]=t),ko(n)||(a["X-MAGICBELL-USER-EXTERNAL-ID"]=n),ko(o)||(a["X-MAGICBELL-USER-HMAC"]=o),l("/web_push_subscriptions",{web_push_subscription:{data:e}},{headers:a})}function _o({children:e,serviceWorkerPath:t="/service-worker.js",skipServiceWorkerRegistration:n=!1}){const o=r(),i="safari"in window,a="PushManager"in window;return m(()=>{n||navigator.serviceWorker.register(t)},[]),e({createSubscription:async()=>{if(!o)return Promise.reject(new Error("Context for MagicBell was not found"));if(i){var e,t,n;const r=w(["safari","authenticationToken"],null==(e=o.channels)?void 0:e.webPush.config),i=w(["safari","websitePushId"],null==(t=o.channels)?void 0:t.webPush.config);return function(e,t,n="web.com.magicbell-notifications"){const o=window.safari.pushNotification.permission(n);return"granted"===o.permission?Promise.resolve(o):"denied"===o.permission?Promise.reject(!1):new Promise(function(o,r){window.safari.pushNotification.requestPermission(t,n,{authenticationToken:e},function(e){if(e.deviceToken)Eo({endpoint:e.deviceToken,keys:{websitePushID:n},platform:"safari"}).then(e=>{o(e)}).catch(e=>{r(e)});else{const e=new Error("Permission was denied");r(e)}})})}(r,w(["safari","webServiceUrl"],null==(n=o.channels)?void 0:n.webPush.config),i)}return a?navigator.serviceWorker.ready.then(async e=>{await async function(e,t){const n=w(["webPush","config","vapidAuthentication","publicKey"],t.channels);return Eo((await function(e,t){const n=function(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),o=new Uint8Array(n.length);for(let e=0;e<n.length;++e)o[e]=n.charCodeAt(e);return o}(t);return e.subscribe({userVisibleOnly:!0,applicationServerKey:n})}(e,n)).toJSON())}(e.pushManager,o)}):void 0},isPushAPISupported:a})}export{X as Badge,oe as Bell,Ge as ClickableNotification,yt as EnablePushNotificationsButton,gn as FloatingInboxContainer,yn as FloatingNotificationInbox,pn as FloatingNotificationInboxArrow,$t as Footer,Tt as Header,ie as MagicBellContext,he as MagicBellProvider,B as MagicBellThemeContext,we as NotificationContent,un as NotificationInbox,Gt as NotificationList,nn as NotificationPreferences,Se as NotificationState,Ae as Popover,_o as PushNotificationsSubscriber,Ue as StyledNotificationContainer,Le as Timestamp,G as darken,ye as default,F as defaultMagicBellTheme,W as toRGBA,ae as useMagicBellContext,D as useTheme};
//# sourceMappingURL=magicbell-react.modern.js.map
